<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Juego de Autos</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: black;
      color: #fff;
      font-family: sans-serif;
      overflow: hidden;
      touch-action: none;
    }

    #gameContainer {
      position: relative;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
    }

    #car {
      position: absolute;
      width: 60px;
      height: 60px;
      background-image: url('imagenes/auto.png');
      background-size: contain;
      background-repeat: no-repeat;
      transform: rotate(180deg);
    }

    .coin {
      position: absolute;
      width: 40px;
      height: 40px;
      background-image: url('imagenes/moneda.png');
      background-size: contain;
      background-repeat: no-repeat;
    }

    #coinCount {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.7);
      padding: 8px 16px;
      border-radius: 10px;
      color: #FFD700;
      font-weight: bold;
      z-index: 10;
    }

    .controls {
      position: absolute;
      bottom: 20px;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      z-index: 10;
    }

    .controls .row {
      display: flex;
      gap: 10px;
      justify-content: center;
    }
  </style>
</head>
<body>
  <div id="gameContainer">
    <h1>MotorDeal</h1>
    <p>¬°Usa el joystick o las teclas para reoger todas las monedas!</p>
    <p>Encuentranos en: https://motordeal.store/</p>
    <div id="coinCount">Monedas recogidas: 0 / 5</div>
    <div id="car"></div>
    <div class="controls d-md-none">
      <div class="row">
        <button class="btn btn-warning" onclick="moveManual('up')">‚Üë</button>
      </div>
      <div class="row">
        <button class="btn btn-warning" onclick="moveManual('left')">‚Üê</button>
        <button class="btn btn-warning" onclick="moveManual('down')">‚Üì</button>
        <button class="btn btn-warning" onclick="moveManual('right')">‚Üí</button>
      </div>
    </div>
  </div>

  <script>
    const gameContainer = document.getElementById('gameContainer');
    const car = document.getElementById('car');
    const coinCountDisplay = document.getElementById('coinCount');

    let carX = 100, carY = 100, carAngle = 180;
    let speed = 5;
    let coinsCollected = 0;
    let keys = {};

    car.style.left = `${carX}px`;
    car.style.top = `${carY}px`;

    // Crear 5 monedas
    for (let i = 0; i < 5; i++) {
      const coin = document.createElement('div');
      coin.classList.add('coin');
      positionCoin(coin);
      gameContainer.appendChild(coin);
    }

    function positionCoin(coin) {
      const padding = 80;
      const maxX = gameContainer.clientWidth - 40 - padding;
      const maxY = gameContainer.clientHeight - 40 - padding;
      const x = Math.random() * maxX + padding / 2;
      const y = Math.random() * maxY + padding / 2;
      coin.style.left = `${x}px`;
      coin.style.top = `${y}px`;
    }

    function moveManual(dir) {
      switch (dir) {
        case 'up': carY -= speed; carAngle = 0; break;
        case 'down': carY += speed; carAngle = 180; break;
        case 'left': carX -= speed; carAngle = 270; break;
        case 'right': carX += speed; carAngle = 90; break;
      }
      updateCarPosition();
    }

    function updateCarPosition() {
      const maxX = gameContainer.clientWidth - 60;
      const maxY = gameContainer.clientHeight - 60;
      carX = Math.max(0, Math.min(maxX, carX));
      carY = Math.max(0, Math.min(maxY, carY));
      car.style.left = `${carX}px`;
      car.style.top = `${carY}px`;
      car.style.transform = `rotate(${carAngle}deg)`;
      checkCollision();
    }

    function checkCollision() {
      const carRect = car.getBoundingClientRect();
      const coins = document.querySelectorAll('.coin');
      coins.forEach(coin => {
        const rect = coin.getBoundingClientRect();
        const reduced = {
          left: rect.left + rect.width * 0.25,
          right: rect.right - rect.width * 0.25,
          top: rect.top + rect.height * 0.25,
          bottom: rect.bottom - rect.height * 0.25,
        };
        const overlap = !(
          carRect.right < reduced.left ||
          carRect.left > reduced.right ||
          carRect.bottom < reduced.top ||
          carRect.top > reduced.bottom
        );
        if (overlap) {
          coin.remove();
          coinsCollected++;
          coinCountDisplay.textContent = `Monedas recogidas: ${coinsCollected} / 5`;
          if (coinsCollected === 5) {
            alert("üéâ ¬°Felicidades! Recogiste todas las monedas. Ahora solo falta tu voto para que ganemos el 'Proyecto Popular'. ¬°Hac√© clic en el bot√≥n de Facebook y apoyanos con tu voto! üôå");
            window.location.href = "https://www.facebook.com/share/171NxZ5iez/?mibextid=wwXIfr";
          }
        }
      });
    }

    document.addEventListener("keydown", (e) => {
      const k = e.key.toLowerCase();
      if (["arrowup", "arrowdown", "arrowleft", "arrowright", "w", "a", "s", "d"].includes(k)) {
        e.preventDefault();
        keys[k] = true;
      }
    });

    document.addEventListener("keyup", (e) => {
      keys[e.key.toLowerCase()] = false;
    });

    function gameLoop() {
      if (keys["arrowup"] || keys["w"]) { carY -= speed; carAngle = 0; }
      if (keys["arrowdown"] || keys["s"]) { carY += speed; carAngle = 180; }
      if (keys["arrowleft"] || keys["a"]) { carX -= speed; carAngle = 270; }
      if (keys["arrowright"] || keys["d"]) { carX += speed; carAngle = 90; }
      updateCarPosition();
      requestAnimationFrame(gameLoop);
    }

    gameLoop();
  </script>
</body>
</html>



